<?php
	include 'confg.php';
	include 'pdo.php';
	include_once 'createdb.php';
?>

<!DOCTYPE html>
<html lang="en">
	<?php include 'base/header.php'; ?>
  <body class="nav-md footer_fixed">
    <form method="post">
    	<div class="container body">
    		<div class="main_container">

    			<div class="col-md-3 left_col menu_fixed">
    				<div class="left_col scroll-view">
    					<div class="clearfix"></div>

    					<!-- menu profile quick info -->
    					<div class="profile clearfix">
  							<div class="profile_pic">
  								<img class="img-circle img1 profile_img" src="images/user.png">
  							</div>
  							<div class="profile_info">
  								<span>Magandang</span>
  								<h2><b>ARAW!</b></h2>
  								<div class="clearfix"></div>
  							</div>
  						</div>
  						<!-- /menu profile quick info -->

    					<br />

    					<!-- sidebar menu -->
              <?php include 'base/sidebar.php'; ?>
              <!-- /sidebar menu -->

    				</div>
    			</div>

          <!-- top navigation -->
          <div class="top_nav">
            <div class="nav_menu">
              <nav>
                <div class="nav toggle">
                  <a id="menu_toggle"><i class="fa fa-bars"></i></a>
                </div>
              </nav>
            </div>
          </div>
          <!-- /top navigation -->

          <!-- page content -->
					<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-hidden="true">
						<div class="modal-dialog modal-sm">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
									<h4 class="modal-title" id="myModalLabel2">Add new plan</h4>
								</div>
								<form method='post' name='myform' onsubmit="CheckForm()">
									<div class="modal-body">
										<?php
											if(isset($_POST['btn-addPlan'])){
												tgpdso::addPlan();
											}
										?>
										Plan Code: <input type="text" class="form-control" name="planCode"><br>
										Plan Description: <input type="text" class="form-control" name="planDesc">
										Plan Rate: <input type="text" class="form-control" name="planRate">
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
										<button type="submit" class="btn btn-primary" name="btn-addPlan"><i class="fa fa-plus"></i>&nbsp;&nbsp;Add</button>
									</div>
								</form>
							</div>
						</div>
					</div>
          <div class="right_col" role="main">
            <div class="">
              <div class="clearfix"></div>
              <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                  <div class="x_panel">
                    <div class="x_title">
                      <h2><b>DAILY PRODUCTION</b></h2>
                      <div class="clearfix"></div>
                    </div>
                      <div id="datatable-fixed-header_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                        <div class="row">
													<div class="col-sm-3">
				                          Transaction Date <span class="required">*</span>
				                          <input name="transDate" class="date-picker form-control" required="required" type="date"required><br>
				                          Last Name <span class="required">*</span>
				                          <input type="text" placeholder="Firstname" name="firstname" required="required" class="form-control" required><br/>
																	First Name <span class="required">*</span>
				                          <input type="text" placeholder="Lastname" name="lastname" required="required" class="form-control" required><br/>
						                      Policy No. <span class="required">*</span>
						                      <input type="text" name="policyNo" placeholder="Policy No." required="required" class="form-control" required><br>
				                          Plan <span class="required">*</span> <br>
				                          <select name="plan" class="form-control">
				                          <?php tgpdso::dropdown_plans(); ?>
				                          </select>
																	<button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-sm"><span class='glyphicon glyphicon-plus'></span></button><br>
																	Official Receipt No.
																	<input type="text" name="receiptNo" required="required" class="form-control" required><br>
						                      Face Amount
						                      <input type="text" name="faceAmount" required="required" class="form-control" required><br>
						                      Premium <span class="required">*</span>
				                          <input type="text" name="premium" required="required" class="form-control" required><br>
						                     	Rate <span class="required">*</span><br>
						                      <input type="text" name="rate" required="required" class="form-control" required><br>
																	Mode of Payment <span class="required">*</span><br>
				                          <select name="modeOfPayment" class="select2_gender form-control" tabindex="-1">
			                            <option value="Monthly">Monthly</option>
			                            <option value="Quarterly">Quarterly</option>
			                            <option value="Semi-Annual">Semi-Annual</option>
			                            <option value="Annualy">Annualy</option>
																	</select><br>
						                      Agent <span class="required">*</span><br>
				                          <input type="text" name="agent" required="required" class="form-control" required><br>
				                          Remarks <span class="required">*</span><br>
				                          <select name="remarks" class="select2_gender form-control" tabindex="-1">
				                            <option value="New">New</option>
				                            <option value="FYP">FYP</option>
				                            <option value="RYP">RYP</option>
				                          </select><br><br>
																	<center>

																		<button type="submit" class="btn btn-primary" name="btn-addPlan"><i class="fa fa-plus"></i>&nbsp;&nbsp;Save</button>
																		<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
														</div>
                          <div class="col-sm-9">
                            <table id="datatable-fixed-header" class="table table-striped table-bordered dataTable table-hover no-footer" role="grid" aria-describedby="datatable-fixed-header_info">
                              <thead>
                                <tr role="row">
                                  <th class="sorting_asc" tabindex="0" aria-controls="datatable-fixed-header" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Trans. Date: activate to sort column descending" style="width: 15px;text-align:center;">Trans. Date</th>
	                                  <th class="sorting" tabindex="0" aria-controls="datatable-fixed-header" rowspan="1" colspan="1" aria-label="Name of Insured: activate to sort column ascending" style="width: 155px;text-align:center;">Name of Insured</th>
                                  <th class="sorting" tabindex="0" aria-controls="datatable-fixed-header" rowspan="1" colspan="1" aria-label="Policy No.: activate to sort column ascending" style="width: 35px;text-align:center;">Policy No.</th>
                                  <th class="sorting" tabindex="0" aria-controls="datatable-fixed-header" rowspan="1" colspan="1" aria-label="OR No.: activate to sort column ascending" style="width: 30px;text-align:center;">OR No.</th>
                                  <th class="sorting" tabindex="0" aria-controls="datatable-fixed-header" rowspan="1" colspan="1" aria-label="Premium: activate to sort column ascending" style="width: 15px;text-align:center;">Premium</th>
                                  <th class="sorting" tabindex="0" aria-controls="datatable-fixed-header" rowspan="1" colspan="1" aria-label="Mode of Payment: activate to sort column ascending" style="width: 15px;text-align:center;">M.O.P</th>
                                  <th class="sorting" tabindex="0" aria-controls="datatable-fixed-header" rowspan="1" colspan="1" aria-label="Issued Date: activate to sort column ascending" style="width: 100px;text-align:center;">Agent</th>
                                  <th class="sorting" tabindex="0" aria-controls="datatable-fixed-header" rowspan="1" colspan="1" aria-label="Agent: activate to sort column ascending" style="width: 15px;text-align:center;">Status</th>
                                </tr>
                              </thead>
                              <tbody>
                                  <?php
                                    $DB_con = Database::connect();
                                    $DB_con->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);
                                    $sql = "SELECT * FROM production";

                                    $result = $DB_con->query($sql);
                                    if($result->rowCount()>0){
                                      while($row=$result->fetch(PDO::FETCH_ASSOC)){
                                        ?>
                                        <tr>
                                          <td><?php print($row['transDate']); ?></td>
                                          <td><?php print($row['lastName']. ", " .$row['firstName']); ?></td>
                                          <td><?php print($row['policyNo']); ?></td>
                                          <td><?php print($row['receiptNo']); ?></td>
                                          <td><?php print($row['premium']); ?></td>
                                          <td><?php print($row['modeOfPayment']); ?></td>
                                          <td><?php print($row['agent']);?></td>
                                          <td><?php print($row['remarks']); ?></td>
                                        </tr>
                                        <?php
                                      }
                                    }
                                    else{}
                                  ?>

                                </tbody>
                            </table>
																<button type="Delete" class="btn btn-primary">Delete</button>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- /page content -->
    		</div>
    	</div>
    </form>

    <footer>
      <div class="pull-right">
        COPYRIGHT 2018 | TGP DISTRICT SALES OFFICE
      </div>
      <div class="clearfix"></div>
    </footer>

    <?php include 'java.php'; ?>
  </body>
</html>
